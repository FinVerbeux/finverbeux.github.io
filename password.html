<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de Mots de Passe - TSN Tools</title>
    
    <!-- Import du style global -->
    <link rel="stylesheet" href="style.css">
    <!-- Icones FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Styles spécifiques pour la disposition des contrôles */
        .controls-panel {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .col {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-main);
            font-size: 0.9rem;
        }

        /* Style spécifique pour le groupe de checkboxes */
        .checkbox-group {
            background: #0d1117;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--border);
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        .checkbox-item:last-child { margin-bottom: 0; }
        .checkbox-item input { width: auto; margin: 0; } /* Reset du width 100% global */

        .divider {
            height: 1px;
            background-color: var(--border);
            margin: 20px 0;
            border: none;
        }

        .note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        /* Slider personnalisé sommaire */
        input[type=range] {
            width: 100%;
            background: transparent;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <!-- Barre de navigation -->
    <div class="nav-bar">
        <a href="index.html" class="back-btn">
            <i class="fa-solid fa-arrow-left"></i> Retour au Hub
        </a>
    </div>

    <!-- Contenu Principal -->
    <div style="max-width: 800px; margin: 0 auto; padding: 0 20px 40px 20px;">
        
        <div style="text-align: center; margin-bottom: 30px;">
            <h1><i class="fa-solid fa-shield-halved" style="color:var(--accent)"></i> Pass Generator V2</h1>
            <p class="subtitle">Générez des mots de passe robustes et personnalisés.</p>
        </div>

        <!-- Zone de Résultat -->
        <div>
            <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:5px;">
                <label><i class="fa-solid fa-list"></i> Vos mots de passe :</label>
                <button onclick="copier()" id="btnCopy" style="padding: 5px 15px; font-size:0.8rem; background-color: #30363d;">
                    <i class="fa-regular fa-copy"></i> Copier
                </button>
            </div>
            <textarea id="resultOutput" readonly placeholder="Cliquez sur 'Générer'..." style="height: 150px; color: var(--accent); font-weight:bold;"></textarea>
        </div>

        <!-- Panneau de Contrôle -->
        <div class="controls-panel">
            
            <!-- Ligne 1 : Longueur et Quantité -->
            <div class="row">
                <div class="col">
                    <label>Longueur (partie aléatoire) : <span id="lengthVal" style="color:var(--accent)">16</span></label>
                    <input type="range" id="length" min="4" max="64" value="16" oninput="document.getElementById('lengthVal').innerText = this.value">
                </div>
                <div class="col">
                    <label>Nombre à générer (Max 50) :</label>
                    <input type="number" id="quantity" value="1" min="1" max="50">
                </div>
            </div>

            <hr class="divider">

            <!-- Ligne 2 : Caractères et Symboles -->
            <div class="row">
                <div class="col">
                    <label>Types de caractères :</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" id="uppercase" checked> Majuscules (A-Z)</label>
                        <label class="checkbox-item"><input type="checkbox" id="lowercase" checked> Minuscules (a-z)</label>
                        <label class="checkbox-item"><input type="checkbox" id="numbers" checked> Chiffres (0-9)</label>
                    </div>
                </div>
                <div class="col">
                    <label>Symboles Spéciaux :</label>
                    <input type="text" id="customSymbols" value="!@#$%^&*()_+-=[]{}">
                    <div class="note"><i class="fa-solid fa-circle-info"></i> Laissez vide pour aucun symbole.</div>
                </div>
            </div>

            <hr class="divider">

            <!-- Ligne 3 : Préfixe et Suffixe -->
            <div class="row">
                <div class="col">
                    <label>Préfixe (Début) :</label>
                    <input type="text" id="prefix" placeholder="Ex: Admin_">
                </div>
                <div class="col">
                    <label>Suffixe (Fin) :</label>
                    <input type="text" id="suffix" placeholder="Ex: _2024">
                </div>
            </div>

            <!-- Bouton d'action -->
            <button onclick="genererListe()" style="width: 100%; font-size: 1.1rem; padding: 15px;">
                <i class="fa-solid fa-rotate"></i> Générer les mots de passe
            </button>

        </div>
    </div>

    <script>
        function genererListe() {
            // 1. Récupération des valeurs
            const length = parseInt(document.getElementById('length').value);
            let quantity = parseInt(document.getElementById('quantity').value);
            const prefix = document.getElementById('prefix').value;
            const suffix = document.getElementById('suffix').value;
            const customSymbols = document.getElementById('customSymbols').value;
            
            // Sécurité : limiter la quantité
            if (quantity > 50) quantity = 50;
            if (quantity < 1) quantity = 1;

            // 2. Construction de la "soupe" de caractères
            let charset = "";
            if (document.getElementById('uppercase').checked) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            if (document.getElementById('lowercase').checked) charset += "abcdefghijklmnopqrstuvwxyz";
            if (document.getElementById('numbers').checked) charset += "0123456789";
            
            if (customSymbols.length > 0) {
                charset += customSymbols;
            }

            const output = document.getElementById('resultOutput');

            // Vérification
            if (charset === "") {
                output.value = "⚠️ Erreur : Sélectionnez au moins un type de caractère.";
                return;
            }

            // 3. Boucle de génération
            let finalResult = [];

            for (let k = 0; k < quantity; k++) {
                let randomPart = "";
                const array = new Uint32Array(length);
                window.crypto.getRandomValues(array);

                for (let i = 0; i < length; i++) {
                    randomPart += charset[array[i] % charset.length];
                }
                
                finalResult.push(prefix + randomPart + suffix);
            }

            // 4. Affichage
            output.value = finalResult.join('\n');
        }

        function copier() {
            const content = document.getElementById('resultOutput');
            
            if(content.value === "" || content.value.startsWith("⚠️")) return;

            content.select();
            content.setSelectionRange(0, 99999); 

            navigator.clipboard.writeText(content.value).then(() => {
                const btn = document.getElementById('btnCopy');
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fa-solid fa-check"></i> Copié !';
                btn.style.backgroundColor = 'var(--accent)';
                
                setTimeout(() => { 
                    btn.innerHTML = original; 
                    btn.style.backgroundColor = '#30363d';
                }, 2000);
            });
        }
        
        // Générer au chargement pour ne pas avoir une page vide
        window.onload = genererListe;
    </script>
</body>
</html>