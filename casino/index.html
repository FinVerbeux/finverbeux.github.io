<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Casino Nuit</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:#0a0a0f; --surface:#12121a; --card-bg:#1a1a26;
    --accent:#e8c97a; --red:#e74c3c; --green:#2ecc71;
    --black-suit:#e8e8f0; --text:#e8e8f0; --muted:#6b6b8a; --border:#2a2a3d;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow-x:hidden;}
  body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 80% 60% at 50% -10%,rgba(232,201,122,.08) 0%,transparent 70%),radial-gradient(ellipse 40% 40% at 80% 80%,rgba(199,62,43,.06) 0%,transparent 60%);}

  .screen{display:none;position:relative;z-index:1;width:100%;max-width:720px;padding:24px 20px;flex-direction:column;align-items:center;gap:22px;}
  .screen.active{display:flex;}

  /* HUB */
  .hub-logo{text-align:center;}
  .hub-logo h1{font-family:'Playfair Display',serif;font-size:clamp(2.4rem,7vw,4rem);font-weight:900;letter-spacing:-.02em;color:var(--accent);text-shadow:0 0 80px rgba(232,201,122,.35);}
  .hub-logo p{color:var(--muted);font-size:.8rem;letter-spacing:.16em;text-transform:uppercase;margin-top:6px;}
  .hub-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:14px;width:100%;}
  .hub-card{background:var(--surface);border:1px solid var(--border);border-radius:22px;padding:28px 22px;cursor:pointer;text-align:center;position:relative;overflow:hidden;transition:transform .25s,border-color .25s,box-shadow .25s;}
  .hub-card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent);opacity:0;transition:opacity .3s;}
  .hub-card:hover{transform:translateY(-5px);border-color:var(--accent);box-shadow:0 18px 50px rgba(232,201,122,.12);}
  .hub-card:hover::before{opacity:.5;}
  .hub-card .game-icon{font-size:2.8rem;display:block;margin-bottom:12px;}
  .hub-card h2{font-family:'Playfair Display',serif;font-size:1.25rem;font-weight:700;color:var(--accent);margin-bottom:6px;}
  .hub-card p{font-size:.76rem;color:var(--muted);line-height:1.6;}
  .hub-card .play-tag{display:inline-block;margin-top:14px;font-size:.7rem;text-transform:uppercase;letter-spacing:.12em;color:var(--accent);border:1px solid rgba(232,201,122,.3);border-radius:50px;padding:5px 14px;}

  /* GAME HEADER */
  .game-header{width:100%;display:flex;align-items:center;gap:14px;}
  .back-btn{background:transparent;border:1px solid var(--border);border-radius:10px;padding:7px 13px;color:var(--muted);font-size:.8rem;cursor:pointer;transition:all .2s;white-space:nowrap;}
  .back-btn:hover{border-color:var(--accent);color:var(--accent);}
  .game-title{font-family:'Playfair Display',serif;font-size:clamp(1.3rem,4vw,1.9rem);font-weight:900;color:var(--accent);}

  /* CARDS */
  .card{width:86px;height:124px;border-radius:12px;border:1px solid var(--border);background:var(--card-bg);display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:'Playfair Display',serif;position:relative;flex-shrink:0;transition:box-shadow .3s;}
  .card.hidden{background:linear-gradient(135deg,#1e1e2e,#12121a);}
  .card.hidden::before{content:'?';font-size:2.6rem;color:var(--border);}
  .card.hidden::after{content:'';position:absolute;inset:6px;border:1px solid var(--border);border-radius:8px;background:repeating-linear-gradient(45deg,transparent,transparent 4px,rgba(255,255,255,.015) 4px,rgba(255,255,255,.015) 5px);}
  .card.reveal{animation:flipIn .4s cubic-bezier(.34,1.56,.64,1) forwards;}
  @keyframes flipIn{0%{transform:rotateY(90deg) scale(.8);opacity:0}100%{transform:rotateY(0) scale(1);opacity:1}}
  .card.correct{border-color:var(--green);box-shadow:0 0 16px rgba(46,204,113,.3);}
  .card.wrong{border-color:var(--red);box-shadow:0 0 16px rgba(231,76,60,.3);}
  .card-value{font-size:1.75rem;line-height:1;font-weight:700;}
  .card-suit{font-size:1.15rem;line-height:1;margin-top:3px;}
  .card.red-card .card-value,.card.red-card .card-suit{color:var(--red);}
  .card.black-card .card-value,.card.black-card .card-suit{color:var(--black-suit);}
  .card.sm{width:66px;height:96px;}
  .card.sm .card-value{font-size:1.35rem;}
  .card.sm .card-suit{font-size:.9rem;}
  .card.sm.hidden::before{font-size:1.9rem;}

  /* BOX */
  .box{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:20px 24px;width:100%;position:relative;overflow:hidden;}
  .box::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent);opacity:.25;}

  /* BTNS */
  .btn{background:transparent;border:1px solid var(--border);border-radius:12px;padding:12px 22px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;}
  .btn:hover{border-color:var(--accent);color:var(--accent);background:rgba(232,201,122,.05);transform:translateY(-2px);}
  .btn:disabled{opacity:.35;pointer-events:none;}
  .btn.primary{background:var(--accent);color:#0a0a0f;border-color:var(--accent);font-weight:700;}
  .btn.primary:hover{box-shadow:0 8px 24px rgba(232,201,122,.3);color:#0a0a0f;}
  .btn.danger{border-color:rgba(231,76,60,.4);color:var(--red);}
  .btn.danger:hover{border-color:var(--red);background:rgba(231,76,60,.08);color:var(--red);}
  .btn.suit-btn{font-size:1.25rem;padding:10px 16px;min-width:66px;}
  .btn.suit-btn.red-suit{color:var(--red);border-color:rgba(231,76,60,.3);}
  .btn.suit-btn.red-suit:hover{border-color:var(--red);background:rgba(231,76,60,.08);}
  .btn.suit-btn.black-suit{color:var(--black-suit);}
  .btn.suit-btn.black-suit:hover{border-color:var(--black-suit);background:rgba(232,232,240,.05);}
  .btn-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;}
  .disabled{pointer-events:none;opacity:.4;}

  /* STEPS */
  .steps{display:flex;gap:8px;}
  .step-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:all .3s;}
  .step-dot.active{background:var(--accent);box-shadow:0 0 10px var(--accent);transform:scale(1.3);}
  .step-dot.done{background:var(--muted);}

  /* PILL */
  .pill{display:flex;align-items:center;gap:9px;background:var(--surface);border:1px solid var(--border);border-radius:50px;padding:7px 18px;}
  .pill .lbl{font-size:.68rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);}
  .pill .val{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--red);}
  .pill .unit{font-size:.72rem;color:var(--muted);}

  /* TOAST */
  .toast{position:fixed;top:24px;left:50%;transform:translateX(-50%) translateY(-120px);background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:13px 24px;text-align:center;z-index:200;min-width:230px;box-shadow:0 20px 60px rgba(0,0,0,.5);transition:transform .4s cubic-bezier(.34,1.56,.64,1);}
  .toast.show{transform:translateX(-50%) translateY(0);}
  .toast.ok{border-color:var(--green);}
  .toast.ko{border-color:var(--red);}
  .t-icon{font-size:1.7rem;}
  .t-title{font-family:'Playfair Display',serif;font-size:.98rem;font-weight:700;margin-top:3px;}
  .t-sub{font-size:.73rem;color:var(--muted);margin-top:2px;}

  /* HISTORY */
  .history{width:100%;}
  .history-title{font-size:.64rem;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:7px;}
  .history-item{display:flex;justify-content:space-between;align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:8px 13px;font-size:.78rem;margin-bottom:5px;animation:slideIn .3s ease;}
  @keyframes slideIn{from{opacity:0;transform:translateX(-8px)}to{opacity:1;transform:translateX(0)}}
  .hi-label{color:var(--muted);font-size:.68rem;}
  .hi-val{font-family:'Playfair Display',serif;font-size:.95rem;font-weight:700;}
  .hi-val.red{color:var(--red);}
  .hi-val.green{color:var(--green);}
  .hi-val.gold{color:var(--accent);}

  /* END BOX */
  .end-box{background:var(--surface);border:1px solid var(--border);border-radius:24px;padding:34px 26px;width:100%;text-align:center;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;gap:9px;}
  .end-box::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent);}
  .end-box h2{font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:900;color:var(--accent);}
  .end-box .sips-big{font-family:'Playfair Display',serif;font-size:3.8rem;font-weight:900;color:var(--red);}
  .end-box p{color:var(--muted);font-size:.81rem;}

  /* RIVIÃˆRE */
  .riv-cards-row{display:flex;gap:10px;justify-content:center;align-items:flex-end;flex-wrap:wrap;min-height:145px;}
  .card-slot{display:flex;flex-direction:column;align-items:center;gap:6px;}
  .card-label{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);}
  .riv-q-text{font-family:'Playfair Display',serif;font-size:1.15rem;font-weight:700;text-align:center;margin-bottom:4px;}
  .riv-q-sub{font-size:.74rem;color:var(--muted);text-align:center;margin-bottom:18px;}

  /* BLACKJACK */
  .bj-stats{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;width:100%;}
  .bj-stat{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:9px 16px;text-align:center;flex:1;min-width:65px;}
  .bj-stat .bs-val{font-family:'Playfair Display',serif;font-size:1.35rem;font-weight:700;color:var(--accent);}
  .bj-stat .bs-lbl{font-size:.62rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);margin-top:2px;}
  .bj-hand-label{font-size:.66rem;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:9px;}
  .bj-hand-row{display:flex;gap:7px;flex-wrap:wrap;align-items:flex-end;min-height:106px;}
  .bj-score-badge{display:inline-flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:.95rem;font-weight:700;background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:2px 9px;margin-left:7px;}
  .bj-score-badge.bust{border-color:var(--red);color:var(--red);}
  .bj-score-badge.bj{border-color:var(--accent);color:var(--accent);}
  .bj-score-badge.good{border-color:var(--green);color:var(--green);}
  .bj-result-title{font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:900;margin-bottom:6px;}
  .bj-result-title.win{color:var(--green);}
  .bj-result-title.lose{color:var(--red);}
  .bj-result-title.push{color:var(--accent);}
  .bj-result-sub{font-size:.8rem;color:var(--muted);}

  /* ROULETTE */
  .rl-wheel-wrap{position:relative;width:220px;height:220px;margin:0 auto;}
  .rl-wheel{width:220px;height:220px;border-radius:50%;border:4px solid var(--accent);position:relative;overflow:hidden;
    background:conic-gradient(
      #1a1a26 0deg 9.73deg,#c0392b 9.73deg 19.46deg,#1a1a26 19.46deg 29.19deg,#c0392b 29.19deg 38.92deg,
      #1a1a26 38.92deg 48.65deg,#c0392b 48.65deg 58.38deg,#1a1a26 58.38deg 68.11deg,#c0392b 68.11deg 77.84deg,
      #1a1a26 77.84deg 87.57deg,#c0392b 87.57deg 97.3deg,#1a6b2e 97.3deg 107.03deg,
      #1a1a26 107.03deg 116.76deg,#c0392b 116.76deg 126.49deg,#1a1a26 126.49deg 136.22deg,
      #c0392b 136.22deg 145.95deg,#1a1a26 145.95deg 155.68deg,#c0392b 155.68deg 165.41deg,
      #1a1a26 165.41deg 175.14deg,#c0392b 175.14deg 184.87deg,#1a1a26 184.87deg 194.6deg,
      #c0392b 194.6deg 204.33deg,#1a1a26 204.33deg 214.06deg,#c0392b 214.06deg 223.79deg,
      #1a1a26 223.79deg 233.52deg,#c0392b 233.52deg 243.25deg,#1a1a26 243.25deg 252.98deg,
      #c0392b 252.98deg 262.71deg,#1a1a26 262.71deg 272.44deg,#c0392b 272.44deg 282.17deg,
      #1a1a26 282.17deg 291.9deg,#c0392b 291.9deg 301.63deg,#1a1a26 301.63deg 311.36deg,
      #c0392b 311.36deg 321.09deg,#1a1a26 321.09deg 330.82deg,#c0392b 330.82deg 340.55deg,
      #1a1a26 340.55deg 350.28deg,#c0392b 350.28deg 360deg
    );
  }
  .rl-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:56px;height:56px;border-radius:50%;background:var(--bg);border:3px solid var(--accent);display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:1.05rem;font-weight:700;color:var(--accent);z-index:2;}
  .rl-needle{position:absolute;top:-8px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-top:20px solid var(--accent);z-index:3;filter:drop-shadow(0 0 5px rgba(232,201,122,.6));}

  .rl-bets{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;width:100%;}
  .rl-bet-btn{background:var(--card-bg);border:2px solid var(--border);border-radius:12px;padding:12px 6px;text-align:center;cursor:pointer;transition:all .2s;}
  .rl-bet-btn:hover:not([disabled]){transform:translateY(-2px);}
  .rl-bet-btn[disabled]{opacity:.35;pointer-events:none;}
  .rb-icon{font-size:1.4rem;}
  .rb-label{font-size:.65rem;text-transform:uppercase;letter-spacing:.07em;color:var(--muted);margin-top:3px;}
  .rb-odds{font-size:.62rem;color:var(--accent);margin-top:2px;}
  .rl-bet-btn.red-bet{border-color:rgba(231,76,60,.35);}
  .rl-bet-btn.red-bet:hover:not([disabled]){border-color:var(--red);background:rgba(231,76,60,.1);}
  .rl-bet-btn.black-bet{border-color:rgba(232,232,240,.15);}
  .rl-bet-btn.black-bet:hover:not([disabled]){border-color:var(--black-suit);background:rgba(232,232,240,.05);}
  .rl-bet-btn.green-bet{border-color:rgba(46,204,113,.25);}
  .rl-bet-btn.green-bet:hover:not([disabled]){border-color:var(--green);background:rgba(46,204,113,.1);}
  .rl-bet-btn.gold-bet{border-color:rgba(232,201,122,.2);}
  .rl-bet-btn.gold-bet:hover:not([disabled]){border-color:var(--accent);background:rgba(232,201,122,.07);}

  .rl-result-num{font-family:'Playfair Display',serif;font-size:3.2rem;font-weight:900;line-height:1;}
  .rl-result-num.red{color:var(--red);}
  .rl-result-num.black{color:var(--black-suit);}
  .rl-result-num.green{color:var(--green);}

  .rl-chips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;}
  .rl-chip{background:var(--card-bg);border:2px solid var(--border);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:.88rem;font-weight:700;cursor:pointer;transition:all .2s;color:var(--accent);}
  .rl-chip:hover{border-color:var(--accent);transform:scale(1.08);}
  .rl-chip.selected{border-color:var(--accent);background:rgba(232,201,122,.15);box-shadow:0 0 12px rgba(232,201,122,.25);}

  /* SLOTS */
  .slot-machine{background:var(--surface);border:2px solid var(--border);border-radius:22px;padding:24px;width:100%;position:relative;overflow:hidden;}
  .slot-machine::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent),transparent);}
  .slot-reels{display:flex;gap:12px;justify-content:center;margin-bottom:18px;}
  .slot-reel{width:86px;height:108px;background:var(--card-bg);border:1px solid var(--border);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:2.8rem;overflow:hidden;position:relative;}
  .slot-reel.spinning .reel-inner{animation:reelSpin .1s linear infinite;}
  @keyframes reelSpin{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}
  .slot-reel.win{border-color:var(--accent);box-shadow:0 0 18px rgba(232,201,122,.3);animation:reelWin .5s ease;}
  @keyframes reelWin{0%,100%{transform:scale(1)}50%{transform:scale(1.07)}}
  .slot-paylines{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-bottom:14px;}
  .slot-payline{background:var(--card-bg);border:1px solid var(--border);border-radius:9px;padding:7px 11px;font-size:.7rem;display:flex;justify-content:space-between;align-items:center;}
  .sp-icons{font-size:1rem;}
  .sp-mul{font-family:'Playfair Display',serif;font-weight:700;color:var(--accent);margin-left:6px;}
  .slot-stats{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
  .slot-stat{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:9px 15px;text-align:center;}
  .ss-val{font-family:'Playfair Display',serif;font-size:1.25rem;font-weight:700;color:var(--accent);}
  .ss-lbl{font-size:.6rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);margin-top:2px;}
  .slot-result{text-align:center;min-height:38px;margin-top:6px;}
  .sr-text{font-family:'Playfair Display',serif;font-size:1.35rem;font-weight:700;}
  .sr-text.win{color:var(--accent);}
  .sr-text.lose{color:var(--muted);font-size:.95rem;}
  .sr-text.jackpot{color:var(--accent);font-size:1.9rem;animation:jackpotPulse 1s ease infinite;}
  @keyframes jackpotPulse{0%,100%{text-shadow:0 0 10px rgba(232,201,122,.5)}50%{text-shadow:0 0 30px rgba(232,201,122,.9),0 0 60px rgba(232,201,122,.4)}}
  .slot-bet-row{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;}
  .slot-bet-val{font-family:'Playfair Display',serif;font-size:1.35rem;font-weight:700;color:var(--accent);min-width:48px;text-align:center;}
</style>
</head>
<body>

<div class="toast" id="toast">
  <div class="t-icon" id="tIcon"></div>
  <div class="t-title" id="tTitle"></div>
  <div class="t-sub" id="tSub"></div>
</div>

<!-- â•â•â•â•â•â•â•â• HUB â•â•â•â•â•â•â•â• -->
<div class="screen active" id="screenHub">
  <div class="hub-logo"><h1>Casino Nuit</h1><p>Choisis ton jeu</p></div>
  <div class="hub-grid">
    <div class="hub-card" onclick="goTo('screenRiviere');initRiviere()">
      <span class="game-icon">ğŸƒ</span><h2>Monter la RiviÃ¨re</h2>
      <p>5 questions, 5 cartes. RÃ©ponds bien ou tu bois. Si tu rates, on repart du dÃ©but.</p>
      <span class="play-tag">Jouer â†’</span>
    </div>
    <div class="hub-card" onclick="goTo('screenBlackjack');initBJ()">
      <span class="game-icon">ğŸ‚±</span><h2>Blackjack</h2>
      <p>Tiens-toi sous les 21, bats le croupier. Deck partagÃ© â€” aucun avantage.</p>
      <span class="play-tag">Jouer â†’</span>
    </div>
    <div class="hub-card" onclick="goTo('screenRoulette');initRL()">
      <span class="game-icon">ğŸ¡</span><h2>Roulette</h2>
      <p>Rouge, noir, pair, impairâ€¦ Mise ta mise et laisse la roue dÃ©cider.</p>
      <span class="play-tag">Jouer â†’</span>
    </div>
    <div class="hub-card" onclick="goTo('screenSlot');initSlot()">
      <span class="game-icon">ğŸ°</span><h2>Machine Ã  Sous</h2>
      <p>Aligne les symboles et rafle la mise. Jackpot ou banqueroute ?</p>
      <span class="play-tag">Jouer â†’</span>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â• MONTER LA RIVIÃˆRE â•â•â•â•â•â•â•â• -->
<div class="screen" id="screenRiviere">
  <div class="game-header">
    <button class="back-btn" onclick="goHub()">â† Accueil</button>
    <span class="game-title">Monter la RiviÃ¨re</span>
  </div>
  <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center">
    <div class="pill"><span class="lbl">GorgÃ©es</span><span class="val" id="rivTotalSips">0</span><span class="unit">ğŸº</span></div>
    <div class="pill"><span class="lbl">Deck</span><span class="val" style="font-size:1.1rem;color:var(--accent)" id="rivDeckCount">52</span><span class="unit">cartes</span></div>
  </div>
  <div class="steps" id="rivStepDots"></div>
  <div class="riv-cards-row" id="rivCardsRow"></div>
  <div class="box" id="rivQuestionBox">
    <div class="riv-q-text" id="rivQText"></div>
    <div class="riv-q-sub"  id="rivQSub"></div>
    <div class="btn-row"    id="rivChoices"></div>
  </div>
  <div class="end-box" id="rivEndBox" style="display:none">
    <div style="font-size:2.8rem">ğŸ»</div>
    <h2>Round terminÃ© !</h2>
    <p>Tu as accumulÃ©</p>
    <div class="sips-big" id="rivFinalSips">0</div>
    <p>gorgÃ©es cette manche</p>
    <p style="margin-top:4px">Les cartes restent Â· on repose par-dessus.</p>
    <button class="btn primary" style="margin-top:10px" onclick="rivNewRound()">Nouveau round</button>
  </div>
  <div class="history" id="rivHistory" style="display:none">
    <div class="history-title">Historique</div>
    <div id="rivHistoryList"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â• BLACKJACK â•â•â•â•â•â•â•â• -->
<div class="screen" id="screenBlackjack">
  <div class="game-header">
    <button class="back-btn" onclick="goHub()">â† Accueil</button>
    <span class="game-title">Blackjack</span>
  </div>
  <div class="bj-stats">
    <div class="bj-stat"><div class="bs-val" id="bjWins">0</div><div class="bs-lbl">Victoires</div></div>
    <div class="bj-stat"><div class="bs-val" id="bjLosses">0</div><div class="bs-lbl">DÃ©faites</div></div>
    <div class="bj-stat"><div class="bs-val" id="bjPushes">0</div><div class="bs-lbl">Ã‰galitÃ©s</div></div>
    <div class="bj-stat"><div class="bs-val" id="bjDeckCount" style="color:var(--accent)">52</div><div class="bs-lbl">Cartes</div></div>
  </div>
  <div style="display:flex;flex-direction:column;gap:14px;width:100%">
    <div class="box"><div class="bj-hand-label">Croupier <span class="bj-score-badge" id="bjDealerBadge">?</span></div><div class="bj-hand-row" id="bjDealerHand"></div></div>
    <div class="box"><div class="bj-hand-label">Toi <span class="bj-score-badge" id="bjPlayerBadge">0</span></div><div class="bj-hand-row" id="bjPlayerHand"></div></div>
  </div>
  <div class="btn-row">
    <button class="btn primary" id="bjHitBtn"   onclick="bjHit()">Tirer ğŸƒ</button>
    <button class="btn"         id="bjStandBtn" onclick="bjStand()">Rester âœ‹</button>
    <button class="btn danger"  id="bjNewBtn"   onclick="bjNewGame()" style="display:none">Nouvelle partie ğŸ”„</button>
  </div>
  <div class="box" id="bjResultBox" style="display:none;text-align:center;padding:22px">
    <div class="bj-result-title" id="bjResultTitle"></div>
    <div class="bj-result-sub"   id="bjResultSub"></div>
  </div>
  <div class="history" id="bjHistory" style="display:none">
    <div class="history-title">Historique</div>
    <div id="bjHistoryList"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â• ROULETTE â•â•â•â•â•â•â•â• -->
<div class="screen" id="screenRoulette">
  <div class="game-header">
    <button class="back-btn" onclick="goHub()">â† Accueil</button>
    <span class="game-title">Roulette</span>
  </div>
  <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center">
    <div class="pill"><span class="lbl">Balance</span><span class="val" style="color:var(--accent)" id="rlBalance">1000</span><span class="unit">â‚¬</span></div>
    <div class="pill"><span class="lbl">Mise totale</span><span class="val" style="font-size:1.1rem;color:var(--text)" id="rlCurrentBet">0</span><span class="unit">â‚¬</span></div>
  </div>

  <div class="rl-wheel-wrap">
    <div class="rl-needle"></div>
    <div class="rl-wheel" id="rlWheel">
      <div class="rl-center" id="rlNumber">?</div>
    </div>
  </div>

  <div style="width:100%">
    <div class="history-title" style="text-align:center;margin-bottom:9px">Valeur de mise</div>
    <div class="rl-chips">
      <div class="rl-chip" onclick="rlSelectChip(1)">1</div>
      <div class="rl-chip" onclick="rlSelectChip(5)">5</div>
      <div class="rl-chip selected" onclick="rlSelectChip(10)">10</div>
      <div class="rl-chip" onclick="rlSelectChip(25)">25</div>
      <div class="rl-chip" onclick="rlSelectChip(50)">50</div>
      <div class="rl-chip" onclick="rlSelectChip(100)">100</div>
    </div>
  </div>

  <div style="width:100%">
    <div class="history-title" style="text-align:center;margin-bottom:9px">Placer un pari</div>
    <div class="rl-bets" id="rlBetsGrid">
      <div class="rl-bet-btn red-bet"   onclick="rlBet('rouge')"><div class="rb-icon">ğŸ”´</div><div class="rb-label">Rouge</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn black-bet" onclick="rlBet('noir')"><div class="rb-icon">âš«</div><div class="rb-label">Noir</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn green-bet" onclick="rlBet('zero')"><div class="rb-icon" style="color:var(--green);font-weight:700">0</div><div class="rb-label">ZÃ©ro</div><div class="rb-odds">Ã—36</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('impair')"><div class="rb-icon">âš¡</div><div class="rb-label">Impair</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('pair')"><div class="rb-icon">âš–ï¸</div><div class="rb-label">Pair</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('bas')"><div class="rb-icon">â¬‡ï¸</div><div class="rb-label">1â€“18</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('haut')"><div class="rb-icon">â¬†ï¸</div><div class="rb-label">19â€“36</div><div class="rb-odds">Ã—2</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('douzaine1')"><div class="rb-icon">1ï¸âƒ£</div><div class="rb-label">1â€“12</div><div class="rb-odds">Ã—3</div></div>
      <div class="rl-bet-btn gold-bet"  onclick="rlBet('douzaine2')"><div class="rb-icon">2ï¸âƒ£</div><div class="rb-label">13â€“24</div><div class="rb-odds">Ã—3</div></div>
    </div>
  </div>

  <div class="btn-row">
    <button class="btn" onclick="rlClearBet()">Effacer âœ•</button>
    <button class="btn primary" id="rlSpinBtn" onclick="rlSpin()" style="display:none">Lancer ! ğŸ¡</button>
  </div>

  <div class="history" id="rlHistory" style="display:none">
    <div class="history-title">Historique</div>
    <div id="rlHistoryList"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â• MACHINE Ã€ SOUS â•â•â•â•â•â•â•â• -->
<div class="screen" id="screenSlot">
  <div class="game-header">
    <button class="back-btn" onclick="goHub()">â† Accueil</button>
    <span class="game-title">Machine Ã  Sous</span>
  </div>
  <div class="slot-stats">
    <div class="slot-stat"><div class="ss-val" id="slotBalance">1000</div><div class="ss-lbl">Balance â‚¬</div></div>
    <div class="slot-stat"><div class="ss-val" id="slotTotalWon">0</div><div class="ss-lbl">GagnÃ© â‚¬</div></div>
    <div class="slot-stat"><div class="ss-val" id="slotSpins">0</div><div class="ss-lbl">Tours</div></div>
  </div>
  <div class="slot-machine">
    <div class="slot-reels">
      <div class="slot-reel" id="slotReel0"><div class="reel-inner" id="slotRI0">ğŸ’</div></div>
      <div class="slot-reel" id="slotReel1"><div class="reel-inner" id="slotRI1">ğŸ’</div></div>
      <div class="slot-reel" id="slotReel2"><div class="reel-inner" id="slotRI2">ğŸ’</div></div>
    </div>
    <div class="slot-result"><div class="sr-text" id="slotResultText"></div></div>
  </div>
  <div class="slot-bet-row">
    <button class="btn" style="padding:10px 14px" onclick="slotChangeBet(-1)">âˆ’</button>
    <div style="text-align:center">
      <div style="font-size:.62rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted)">Mise</div>
      <div class="slot-bet-val" id="slotBet">10</div>
    </div>
    <button class="btn" style="padding:10px 14px" onclick="slotChangeBet(1)">+</button>
    <button class="btn primary" id="slotSpinBtn" onclick="slotSpin()">Tourner ğŸ°</button>
  </div>
  <div style="width:100%">
    <div class="history-title" style="margin-bottom:7px">Table des gains</div>
    <div class="slot-paylines">
      <div class="slot-payline"><span class="sp-icons">ğŸ’ğŸ’ğŸ’</span><span class="sp-mul">Ã—100 JACKPOT</span></div>
      <div class="slot-payline"><span class="sp-icons">7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£</span><span class="sp-mul">Ã—50</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸ€ğŸ€ğŸ€</span><span class="sp-mul">Ã—20</span></div>
      <div class="slot-payline"><span class="sp-icons">â­â­â­</span><span class="sp-mul">Ã—15</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸ‹ğŸ‹ğŸ‹</span><span class="sp-mul">Ã—10</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸŠğŸŠğŸŠ</span><span class="sp-mul">Ã—8</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸ‡ğŸ‡ğŸ‡</span><span class="sp-mul">Ã—5</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸ’ğŸ’ğŸ’</span><span class="sp-mul">Ã—3</span></div>
      <div class="slot-payline"><span class="sp-icons">ğŸ’ğŸ’ ?</span><span class="sp-mul">Ã—1.5</span></div>
    </div>
  </div>
  <div class="history" id="slotHistory" style="display:none">
    <div class="history-title">Historique</div>
    <div id="slotHistoryList"></div>
  </div>
</div>

<script>
// â”€â”€ NAV â”€â”€
function goTo(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0);}
function goHub(){goTo('screenHub');}

// â”€â”€ CARDS â”€â”€
const SUITS=['â™ ','â™£','â™¥','â™¦'],RED_SUITS=['â™¥','â™¦'],VALUES=['2','3','4','5','6','7','8','9','10','J','Q','K','A'],FACE_CARDS=['J','Q','K','A'];
function buildDeck(){const d=[];for(const s of SUITS)for(const v of VALUES)d.push({value:v,suit:s});return shuffle(d);}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function isRed(c){return RED_SUITS.includes(c.suit);}
function isFace(c){return FACE_CARDS.includes(c.value);}
function cardNumValue(c){return VALUES.indexOf(c.value);}
function makeCardEl(card,hidden=false,small=false){
  const el=document.createElement('div');
  el.className='card'+(small?' sm':'')+(hidden?' hidden':' reveal '+(isRed(card)?'red-card':'black-card'));
  if(!hidden)el.innerHTML=`<div class="card-value">${card.value}</div><div class="card-suit">${card.suit}</div>`;
  return el;
}

// â”€â”€ TOAST â”€â”€
let toastTimer=null;
function showToast(ok,icon,title,sub,dur=2200){
  const t=document.getElementById('toast');
  document.getElementById('tIcon').textContent=icon;
  document.getElementById('tTitle').textContent=title;
  document.getElementById('tSub').textContent=sub;
  t.className='toast show '+(ok?'ok':'ko');
  clearTimeout(toastTimer);toastTimer=setTimeout(()=>{t.className='toast';},dur);
}

// â”€â”€ DECK PARTAGÃ‰ â”€â”€
let sharedDeck=buildDeck();
function sharedDraw(){if(sharedDeck.length===0)sharedDeck=buildDeck();const c=sharedDeck.pop();updateDeckCounters();return c;}
function updateDeckCounters(){const n=sharedDeck.length;['rivDeckCount','bjDeckCount'].forEach(id=>{const el=document.getElementById(id);if(el)el.textContent=n;});}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MONTER LA RIVIÃˆRE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const RIV_STEPS=[
  {q:'Rouge ou Noir ?',sub:'Quelle couleur sera la 1Ã¨re carte ?',penalty:1},
  {q:'Plus haut ou plus bas ?',sub:'La 2Ã¨me carte par rapport Ã  la 1Ã¨re ?',penalty:2},
  {q:'IntÃ©rieur ou ExtÃ©rieur ?',sub:'La 3Ã¨me sera-t-elle entre les deux premiÃ¨res ?',penalty:3},
  {q:'TÃªte ou pas tÃªte ?',sub:'La 4Ã¨me est-elle une tÃªte ? (J, Q, K, A)',penalty:3},
  {q:'Quelle enseigne ? â™ â™£â™¥â™¦',sub:"Choisis l'enseigne de la 5Ã¨me carte.",penalty:4},
];
let rivCards=[],rivStep=0,rivTotalSips=0,rivRoundSips=0,rivWaiting=false,rivRoundCount=0;

function initRiviere(){
  rivCards=[];rivStep=0;rivTotalSips=0;rivRoundSips=0;rivWaiting=false;rivRoundCount=0;
  document.getElementById('rivTotalSips').textContent='0';
  document.getElementById('rivHistory').style.display='none';
  document.getElementById('rivHistoryList').innerHTML='';
  document.getElementById('rivEndBox').style.display='none';
  document.getElementById('rivQuestionBox').style.display='block';
  updateDeckCounters();rivRender();rivShowQ();
}
function rivRender(){
  const dots=document.getElementById('rivStepDots');dots.innerHTML='';
  for(let i=0;i<RIV_STEPS.length;i++){const d=document.createElement('div');d.className='step-dot'+(i<rivStep?' done':'')+(i===rivStep?' active':'');dots.appendChild(d);}
  const row=document.getElementById('rivCardsRow');row.innerHTML='';
  ['Carte 1','Carte 2','Carte 3','Carte 4','Carte 5'].forEach((lbl,i)=>{
    const slot=document.createElement('div');slot.className='card-slot';
    const l=document.createElement('div');l.className='card-label';l.textContent=lbl;
    slot.appendChild(l);slot.appendChild(i<rivCards.length?makeCardEl(rivCards[i]):makeCardEl(null,true));
    row.appendChild(slot);
  });
}
function rivShowQ(){
  const s=RIV_STEPS[rivStep];
  document.getElementById('rivQText').textContent=s.q;
  document.getElementById('rivQSub').textContent=s.sub;
  const ch=document.getElementById('rivChoices');ch.classList.remove('disabled');ch.innerHTML='';
  if(rivStep===0){rivBtn(ch,'ğŸ”´ Rouge',()=>rivAnswer('rouge'));rivBtn(ch,'âš« Noir',()=>rivAnswer('noir'));}
  else if(rivStep===1){rivBtn(ch,'â¬† Plus haut',()=>rivAnswer('haut'));rivBtn(ch,'â¬‡ Plus bas',()=>rivAnswer('bas'));rivBtn(ch,'= MÃªme valeur',()=>rivAnswer('egal'));}
  else if(rivStep===2){rivBtn(ch,'â†” IntÃ©rieur',()=>rivAnswer('inside'));rivBtn(ch,'â†” ExtÃ©rieur',()=>rivAnswer('outside'));rivBtn(ch,'= MÃªme valeur',()=>rivAnswer('equal'));}
  else if(rivStep===3){rivBtn(ch,'ğŸ‘‘ TÃªte',()=>rivAnswer('tete'));rivBtn(ch,'ğŸ”¢ Pas tÃªte',()=>rivAnswer('notete'));}
  else{for(const s of SUITS){const b=document.createElement('button');b.className='btn suit-btn '+(RED_SUITS.includes(s)?'red-suit':'black-suit');b.textContent=s;b.onclick=()=>rivAnswer(s);ch.appendChild(b);}}
}
function rivBtn(p,t,cb){const b=document.createElement('button');b.className='btn';b.textContent=t;b.onclick=cb;p.appendChild(b);}
function rivAnswer(choice){
  if(rivWaiting)return;rivWaiting=true;
  const card=sharedDraw();rivCards.push(card);rivRender();
  const correct=rivCheck(choice,card);
  const penalty=correct?0:RIV_STEPS[rivStep].penalty;
  rivRoundSips+=penalty;rivTotalSips+=penalty;
  document.getElementById('rivTotalSips').textContent=rivTotalSips;
  document.getElementById('rivChoices').classList.add('disabled');
  setTimeout(()=>{
    const cards=document.querySelectorAll('#rivCardsRow .card');
    if(cards[rivStep])cards[rivStep].classList.add(correct?'correct':'wrong');
    if(correct){
      showToast(true,'âœ…','Bonne rÃ©ponse !','Tu avances !');
      rivStep++;rivRender();
      setTimeout(()=>{rivWaiting=false;if(rivStep>=RIV_STEPS.length)rivShowEnd();else rivShowQ();},1500);
    }else{
      showToast(false,'ğŸ˜¬','Mauvaise rÃ©ponse !',`+${penalty} gorgÃ©e${penalty>1?'s':''} Â· On repart du dÃ©but !`);
      setTimeout(()=>{rivWaiting=false;rivStep=0;rivCards=[];rivRender();rivShowQ();},2000);
    }
  },400);
}
function rivCheck(choice,card){
  if(rivStep===0)return(choice==='rouge'&&isRed(card))||(choice==='noir'&&!isRed(card));
  if(rivStep===1){const v0=cardNumValue(rivCards[0]),v1=cardNumValue(card);if(choice==='haut')return v1>v0;if(choice==='bas')return v1<v0;return v1===v0;}
  if(rivStep===2){const v0=cardNumValue(rivCards[0]),v1=cardNumValue(rivCards[1]),v2=cardNumValue(card),lo=Math.min(v0,v1),hi=Math.max(v0,v1);if(choice==='inside')return v2>lo&&v2<hi;if(choice==='outside')return v2<lo||v2>hi;return v2===lo||v2===hi;}
  if(rivStep===3)return(choice==='tete'&&isFace(card))||(choice==='notete'&&!isFace(card));
  return choice===card.suit;
}
function rivShowEnd(){
  document.getElementById('rivQuestionBox').style.display='none';
  document.getElementById('rivEndBox').style.display='flex';
  document.getElementById('rivFinalSips').textContent=rivRoundSips;
  rivRoundCount++;
  document.getElementById('rivHistory').style.display='block';
  const list=document.getElementById('rivHistoryList');
  const item=document.createElement('div');item.className='history-item';
  item.innerHTML=`<span class="hi-label">Round ${rivRoundCount}</span><span>ComplÃ©tÃ© ğŸ‰</span><span class="hi-val ${rivRoundSips>0?'red':'green'}">${rivRoundSips>0?'+':''}${rivRoundSips} ğŸº</span>`;
  list.prepend(item);
}
function rivNewRound(){
  rivRoundSips=0;rivCards=[];rivStep=0;rivWaiting=false;
  document.getElementById('rivEndBox').style.display='none';
  document.getElementById('rivQuestionBox').style.display='block';
  rivRender();rivShowQ();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BLACKJACK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let bjPlayerHand=[],bjDealerHand=[],bjGameOver=false,bjWins=0,bjLosses=0,bjPushes=0,bjGameCount=0;
function bjVal(c){if(['J','Q','K'].includes(c.value))return 10;if(c.value==='A')return 11;return parseInt(c.value);}
function bjScore(h){let t=0,a=0;for(const c of h){t+=bjVal(c);if(c.value==='A')a++;}while(t>21&&a>0){t-=10;a--;}return t;}
function initBJ(){
  bjWins=0;bjLosses=0;bjPushes=0;bjGameCount=0;
  ['bjWins','bjLosses','bjPushes'].forEach(id=>document.getElementById(id).textContent=0);
  document.getElementById('bjHistory').style.display='none';
  document.getElementById('bjHistoryList').innerHTML='';
  updateDeckCounters();bjNewGame();
}
function bjNewGame(){
  bjPlayerHand=[sharedDraw(),sharedDraw()];bjDealerHand=[sharedDraw(),sharedDraw()];bjGameOver=false;
  document.getElementById('bjResultBox').style.display='none';
  document.getElementById('bjNewBtn').style.display='none';
  document.getElementById('bjHitBtn').style.display='inline-flex';
  document.getElementById('bjStandBtn').style.display='inline-flex';
  document.getElementById('bjHitBtn').disabled=false;
  document.getElementById('bjStandBtn').disabled=false;
  bjRender(false);
  if(bjScore(bjPlayerHand)===21)setTimeout(()=>bjResolve('bj'),500);
}
function bjRender(reveal){
  const ph=document.getElementById('bjPlayerHand');ph.innerHTML='';
  for(const c of bjPlayerHand)ph.appendChild(makeCardEl(c,false,true));
  const ps=bjScore(bjPlayerHand),pb=document.getElementById('bjPlayerBadge');
  pb.textContent=ps;pb.className='bj-score-badge'+(ps>21?' bust':ps===21?' bj':' good');
  const dh=document.getElementById('bjDealerHand');dh.innerHTML='';
  for(let i=0;i<bjDealerHand.length;i++)dh.appendChild(makeCardEl(bjDealerHand[i],!reveal&&i===1,true));
  const db=document.getElementById('bjDealerBadge');
  if(!reveal){db.textContent=bjVal(bjDealerHand[0])+'+?';db.className='bj-score-badge';}
  else{const f=bjScore(bjDealerHand);db.textContent=f;db.className='bj-score-badge'+(f>21?' bust':f===21?' bj':' good');}
}
function bjHit(){if(bjGameOver)return;bjPlayerHand.push(sharedDraw());bjRender(false);const ps=bjScore(bjPlayerHand);if(ps>21)bjResolve('bust');else if(ps===21)bjStand();}
function bjStand(){
  if(bjGameOver)return;
  document.getElementById('bjHitBtn').disabled=true;document.getElementById('bjStandBtn').disabled=true;bjRender(true);
  const draw=()=>{if(bjScore(bjDealerHand)<17){setTimeout(()=>{bjDealerHand.push(sharedDraw());bjRender(true);draw();},600);}else setTimeout(()=>bjResolve('stand'),400);};
  draw();
}
function bjResolve(reason){
  bjGameOver=true;const ps=bjScore(bjPlayerHand),ds=bjScore(bjDealerHand);bjRender(true);
  let outcome,title,sub;
  if(reason==='bj'){outcome='win';title='Blackjack ! ğŸ°';sub='21 du premier coup.';}
  else if(reason==='bust'){outcome='lose';title='Bust ! ğŸ’¥';sub=`${ps} pts â€” trop haut.`;}
  else if(ds>21){outcome='win';title='Victoire !';sub=`Croupier bust Ã  ${ds}.`;}
  else if(ps>ds){outcome='win';title='Victoire !';sub=`${ps} contre ${ds}.`;}
  else if(ds>ps){outcome='lose';title='DÃ©faite';sub=`${ds} contre ${ps}.`;}
  else{outcome='push';title='Ã‰galitÃ©';sub=`${ps} partout.`;}
  if(outcome==='win'){bjWins++;document.getElementById('bjWins').textContent=bjWins;}
  else if(outcome==='lose'){bjLosses++;document.getElementById('bjLosses').textContent=bjLosses;}
  else{bjPushes++;document.getElementById('bjPushes').textContent=bjPushes;}
  const rbox=document.getElementById('bjResultBox');rbox.style.display='block';
  document.getElementById('bjResultTitle').textContent=title;document.getElementById('bjResultTitle').className='bj-result-title '+outcome;
  document.getElementById('bjResultSub').textContent=sub;
  document.getElementById('bjHitBtn').style.display='none';document.getElementById('bjStandBtn').style.display='none';document.getElementById('bjNewBtn').style.display='inline-flex';
  bjGameCount++;document.getElementById('bjHistory').style.display='block';
  const list=document.getElementById('bjHistoryList');const item=document.createElement('div');item.className='history-item';
  item.innerHTML=`<span class="hi-label">Partie ${bjGameCount}</span><span>${outcome==='win'?'âœ…':outcome==='lose'?'âŒ':'ğŸ¤'} ${title}</span><span class="hi-val ${outcome==='win'?'green':outcome==='lose'?'red':'gold'}">${ps}pts</span>`;
  list.prepend(item);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ROULETTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const RL_SEQ=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
const RL_RED=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
let rlBalance=1000,rlChip=10,rlBets=[],rlSpinning=false,rlGameCount=0,rlWheelRot=0;

function initRL(){
  rlBalance=1000;rlChip=10;rlBets=[];rlSpinning=false;rlGameCount=0;rlWheelRot=0;
  document.getElementById('rlBalance').textContent=rlBalance;
  document.getElementById('rlCurrentBet').textContent=0;
  document.getElementById('rlNumber').textContent='?';
  document.getElementById('rlNumber').className='rl-center';
  const w=document.getElementById('rlWheel');w.style.transition='none';w.style.transform='rotate(0deg)';
  document.getElementById('rlSpinBtn').style.display='none';
  document.getElementById('rlHistory').style.display='none';
  document.getElementById('rlHistoryList').innerHTML='';
  document.querySelectorAll('.rl-chip').forEach(c=>c.classList.remove('selected'));
  document.querySelectorAll('.rl-chip')[2].classList.add('selected');
}
function rlSelectChip(v){rlChip=v;document.querySelectorAll('.rl-chip').forEach(c=>c.classList.toggle('selected',parseInt(c.textContent)===v));}
function rlBet(type){
  if(rlSpinning)return;
  if(rlBalance<rlChip){showToast(false,'ğŸ’¸','Fonds insuffisants !','RÃ©duis ta mise.');return;}
  rlBalance-=rlChip;document.getElementById('rlBalance').textContent=rlBalance;
  const ex=rlBets.find(b=>b.type===type);
  if(ex)ex.amount+=rlChip;else rlBets.push({type,amount:rlChip});
  document.getElementById('rlCurrentBet').textContent=rlBets.reduce((s,b)=>s+b.amount,0);
  document.getElementById('rlSpinBtn').style.display='inline-flex';
}
function rlClearBet(){
  if(rlSpinning)return;
  rlBalance+=rlBets.reduce((s,b)=>s+b.amount,0);
  document.getElementById('rlBalance').textContent=rlBalance;
  rlBets=[];document.getElementById('rlCurrentBet').textContent=0;
  document.getElementById('rlSpinBtn').style.display='none';
}
function rlSpin(){
  if(rlSpinning||rlBets.length===0)return;
  rlSpinning=true;
  document.getElementById('rlSpinBtn').disabled=true;
  document.querySelectorAll('.rl-bet-btn').forEach(b=>b.setAttribute('disabled',''));
  const result=Math.floor(Math.random()*37);
  const idx=RL_SEQ.indexOf(result);
  const spins=5+Math.floor(Math.random()*4);
  const targetRot=rlWheelRot+spins*360+(idx/RL_SEQ.length)*360;
  rlWheelRot=targetRot;
  const w=document.getElementById('rlWheel');
  w.style.transition='transform 4.2s cubic-bezier(.17,.67,.12,1)';
  w.style.transform=`rotate(${targetRot}deg)`;
  setTimeout(()=>rlResolve(result),4400);
}
function rlResolve(n){
  const isRlRed=RL_RED.has(n);
  const color=n===0?'green':isRlRed?'red':'black';
  const numEl=document.getElementById('rlNumber');
  numEl.textContent=n;numEl.className='rl-result-num '+color;
  let win=0;
  for(const bet of rlBets){
    const a=bet.amount;
    if(bet.type==='rouge'&&n!==0&&isRlRed)win+=a*2;
    else if(bet.type==='noir'&&n!==0&&!isRlRed)win+=a*2;
    else if(bet.type==='zero'&&n===0)win+=a*36;
    else if(bet.type==='pair'&&n!==0&&n%2===0)win+=a*2;
    else if(bet.type==='impair'&&n!==0&&n%2!==0)win+=a*2;
    else if(bet.type==='bas'&&n>=1&&n<=18)win+=a*2;
    else if(bet.type==='haut'&&n>=19&&n<=36)win+=a*2;
    else if(bet.type==='douzaine1'&&n>=1&&n<=12)win+=a*3;
    else if(bet.type==='douzaine2'&&n>=13&&n<=24)win+=a*3;
  }
  rlBalance+=win;document.getElementById('rlBalance').textContent=rlBalance;
  const totalBet=rlBets.reduce((s,b)=>s+b.amount,0),net=win-totalBet;
  showToast(win>0,win>0?'ğŸ‰':'ğŸ˜”',`NumÃ©ro ${n} â€” ${color==='red'?'Rouge ğŸ”´':color==='green'?'ZÃ©ro ğŸŸ¢':'Noir âš«'}`,win>0?`+${net}â‚¬ gagnÃ© !`:`-${totalBet}â‚¬ perdu`,3000);
  rlGameCount++;document.getElementById('rlHistory').style.display='block';
  const list=document.getElementById('rlHistoryList');const item=document.createElement('div');item.className='history-item';
  item.innerHTML=`<span class="hi-label">Tour ${rlGameCount}</span><span class="hi-val ${color==='red'?'red':color==='green'?'green':''}">${n} ${color==='red'?'ğŸ”´':color==='green'?'ğŸŸ¢':'âš«'}</span><span class="hi-val ${net>=0?'green':'red'}">${net>=0?'+':''}${net}â‚¬</span>`;
  list.prepend(item);
  rlBets=[];document.getElementById('rlCurrentBet').textContent=0;
  setTimeout(()=>{
    rlSpinning=false;
    document.getElementById('rlSpinBtn').disabled=false;
    document.getElementById('rlSpinBtn').style.display='none';
    document.querySelectorAll('.rl-bet-btn').forEach(b=>b.removeAttribute('disabled'));
    if(rlBalance<=0){showToast(false,'ğŸ’€','RuinÃ© !','Retour Ã  1000â‚¬.');setTimeout(()=>{rlBalance=1000;document.getElementById('rlBalance').textContent=rlBalance;},2000);}
  },1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MACHINE Ã€ SOUS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SLOT_SYM=['ğŸ’','ğŸ’','ğŸ’','ğŸ’','ğŸ’','ğŸ‡','ğŸ‡','ğŸ‡','ğŸŠ','ğŸŠ','ğŸ‹','ğŸ‹','â­','â­','ğŸ€','7ï¸âƒ£','ğŸ’'];
const SLOT_PAYS={'ğŸ’ğŸ’ğŸ’':100,'7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£':50,'ğŸ€ğŸ€ğŸ€':20,'â­â­â­':15,'ğŸ‹ğŸ‹ğŸ‹':10,'ğŸŠğŸŠğŸŠ':8,'ğŸ‡ğŸ‡ğŸ‡':5,'ğŸ’ğŸ’ğŸ’':3};
const SLOT_BETS=[1,2,5,10,25,50,100];
let slotBalance=1000,slotBet=10,slotSpinCount=0,slotTotalWon=0,slotSpinning=false,slotGameCount=0;

function initSlot(){
  slotBalance=1000;slotBet=10;slotSpinCount=0;slotTotalWon=0;slotSpinning=false;slotGameCount=0;
  document.getElementById('slotBalance').textContent=slotBalance;
  document.getElementById('slotTotalWon').textContent=0;
  document.getElementById('slotSpins').textContent=0;
  document.getElementById('slotBet').textContent=slotBet;
  document.getElementById('slotResultText').textContent='';
  document.getElementById('slotResultText').className='sr-text';
  document.getElementById('slotHistory').style.display='none';
  document.getElementById('slotHistoryList').innerHTML='';
  for(let i=0;i<3;i++)document.getElementById('slotRI'+i).textContent='ğŸ’';
}
function slotChangeBet(dir){
  if(slotSpinning)return;
  let idx=SLOT_BETS.indexOf(slotBet)+dir;
  idx=Math.max(0,Math.min(SLOT_BETS.length-1,idx));
  slotBet=SLOT_BETS[idx];document.getElementById('slotBet').textContent=slotBet;
}
function slotSpin(){
  if(slotSpinning)return;
  if(slotBalance<slotBet){showToast(false,'ğŸ’¸','Fonds insuffisants !','Baisse ta mise.');return;}
  slotSpinning=true;slotBalance-=slotBet;slotSpinCount++;
  document.getElementById('slotBalance').textContent=slotBalance;
  document.getElementById('slotSpins').textContent=slotSpinCount;
  document.getElementById('slotResultText').textContent='';
  document.getElementById('slotResultText').className='sr-text';
  document.getElementById('slotSpinBtn').disabled=true;
  const results=[];
  for(let i=0;i<3;i++){
    const final=SLOT_SYM[Math.floor(Math.random()*SLOT_SYM.length)];
    results.push(final);
    const reel=document.getElementById('slotReel'+i);
    const inner=document.getElementById('slotRI'+i);
    reel.classList.remove('win');inner.style.filter='blur(2px)';
    reel.classList.add('spinning');
    const iv=setInterval(()=>{inner.textContent=SLOT_SYM[Math.floor(Math.random()*SLOT_SYM.length)];},80);
    setTimeout(()=>{
      clearInterval(iv);reel.classList.remove('spinning');
      inner.textContent=final;inner.style.filter='';
      if(i===2)setTimeout(()=>slotResolve(results),200);
    },600+i*380);
  }
}
function slotResolve(r){
  const combo=r.join('');
  let mult=0,jackpot=false;
  if(r[0]===r[1]&&r[1]===r[2]){mult=SLOT_PAYS[combo]||0;if(combo==='ğŸ’ğŸ’ğŸ’')jackpot=true;}
  if(!mult&&r[0]==='ğŸ’'&&r[1]==='ğŸ’')mult=1.5;
  const win=Math.floor(slotBet*mult);
  slotBalance+=win;slotTotalWon+=win;
  document.getElementById('slotBalance').textContent=slotBalance;
  document.getElementById('slotTotalWon').textContent=slotTotalWon;
  const rt=document.getElementById('slotResultText');
  if(jackpot){rt.textContent='ğŸ’ JACKPOT ! ğŸ’';rt.className='sr-text jackpot';for(let i=0;i<3;i++)document.getElementById('slotReel'+i).classList.add('win');}
  else if(win>0){rt.textContent=`+${win}â‚¬ â€” Ã—${mult}`;rt.className='sr-text win';for(let i=0;i<3;i++){if(r[i]===r[0])document.getElementById('slotReel'+i).classList.add('win');}}
  else{rt.textContent='Rien cette foisâ€¦';rt.className='sr-text lose';}
  if(win>0)showToast(true,jackpot?'ğŸ’':'ğŸ‰',jackpot?'JACKPOT !!':'+'+win+'â‚¬',`Ã—${mult} sur ${slotBet}â‚¬`);
  else showToast(false,'ğŸ˜¶','Pas de chance',r.join(' '));
  slotGameCount++;document.getElementById('slotHistory').style.display='block';
  const list=document.getElementById('slotHistoryList');const item=document.createElement('div');item.className='history-item';
  item.innerHTML=`<span class="hi-label">Tour ${slotGameCount}</span><span>${r.join(' ')}</span><span class="hi-val ${win>0?'green':'red'}">${win>0?'+':''}${win-slotBet}â‚¬</span>`;
  list.prepend(item);
  setTimeout(()=>{
    slotSpinning=false;document.getElementById('slotSpinBtn').disabled=false;
    if(slotBalance<=0){showToast(false,'ğŸ’€','RuinÃ© !','Retour Ã  1000â‚¬.');setTimeout(()=>{slotBalance=1000;document.getElementById('slotBalance').textContent=slotBalance;},2000);}
  },500);
}
</script>
</body>
</html>
